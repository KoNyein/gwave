<!DOCTYPE html>

<html lang="my">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POS â€” Retail Shop</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Myanmar:wght@400;600;700&family=JetBrains+Mono:wght@400;600;700&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0f0f0f;
    --surface: #1a1a1a;
    --surface2: #242424;
    --border: #2e2e2e;
    --accent: #f5c842;
    --accent2: #ff6b35;
    --text: #f0ece0;
    --text2: #888;
    --green: #4ade80;
    --red: #f87171;
    --mmk: #f5c842;
    --thb: #60c4ff;
    --radius: 12px;
    --radius-sm: 8px;
  }

- { box-sizing: border-box; margin: 0; padding: 0; }

body {
background: var(â€“bg);
color: var(â€“text);
font-family: â€˜Space Groteskâ€™, sans-serif;
height: 100vh;
overflow: hidden;
display: flex;
flex-direction: column;
}

/* TOP BAR */
.topbar {
display: flex;
align-items: center;
justify-content: space-between;
padding: 14px 24px;
background: var(â€“surface);
border-bottom: 1px solid var(â€“border);
flex-shrink: 0;
}
.topbar-left { display: flex; align-items: center; gap: 14px; }
.logo {
font-family: â€˜JetBrains Monoâ€™, monospace;
font-size: 22px;
font-weight: 700;
color: var(â€“accent);
letter-spacing: -1px;
}
.logo span { color: var(â€“text2); font-weight: 400; font-size: 13px; }
.clock {
font-family: â€˜JetBrains Monoâ€™, monospace;
font-size: 13px;
color: var(â€“text2);
padding: 6px 12px;
background: var(â€“surface2);
border-radius: 6px;
border: 1px solid var(â€“border);
}
.currency-toggle {
display: flex;
gap: 6px;
}
.cur-btn {
padding: 6px 16px;
border-radius: 20px;
border: 1px solid var(â€“border);
background: transparent;
color: var(â€“text2);
font-family: â€˜JetBrains Monoâ€™, monospace;
font-size: 13px;
font-weight: 600;
cursor: pointer;
transition: all 0.2s;
}
.cur-btn.active-mmk { background: var(â€“mmk); color: #000; border-color: var(â€“mmk); }
.cur-btn.active-thb { background: var(â€“thb); color: #000; border-color: var(â€“thb); }

/* MAIN LAYOUT */
.main {
display: grid;
grid-template-columns: 1fr 380px;
gap: 0;
flex: 1;
overflow: hidden;
}

/* LEFT: PRODUCTS */
.products-panel {
display: flex;
flex-direction: column;
overflow: hidden;
border-right: 1px solid var(â€“border);
}
.search-bar {
padding: 16px;
border-bottom: 1px solid var(â€“border);
display: flex;
gap: 10px;
flex-shrink: 0;
}
.search-bar input {
flex: 1;
background: var(â€“surface2);
border: 1px solid var(â€“border);
border-radius: var(â€“radius-sm);
padding: 10px 14px;
color: var(â€“text);
font-size: 14px;
font-family: â€˜Space Groteskâ€™, sans-serif;
outline: none;
transition: border-color 0.2s;
}
.search-bar input:focus { border-color: var(â€“accent); }
.search-bar input::placeholder { color: var(â€“text2); }

.categories {
display: flex;
gap: 8px;
padding: 12px 16px;
border-bottom: 1px solid var(â€“border);
overflow-x: auto;
flex-shrink: 0;
}
.categories::-webkit-scrollbar { display: none; }
.cat-btn {
padding: 6px 16px;
border-radius: 20px;
border: 1px solid var(â€“border);
background: var(â€“surface2);
color: var(â€“text2);
font-size: 13px;
cursor: pointer;
white-space: nowrap;
transition: all 0.2s;
font-family: â€˜Space Groteskâ€™, sans-serif;
}
.cat-btn.active, .cat-btn:hover { background: var(â€“accent); color: #000; border-color: var(â€“accent); }

.product-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
gap: 12px;
padding: 16px;
overflow-y: auto;
align-content: start;
}
.product-grid::-webkit-scrollbar { width: 4px; }
.product-grid::-webkit-scrollbar-track { background: transparent; }
.product-grid::-webkit-scrollbar-thumb { background: var(â€“border); border-radius: 2px; }

.product-card {
background: var(â€“surface);
border: 1px solid var(â€“border);
border-radius: var(â€“radius);
padding: 14px;
cursor: pointer;
transition: all 0.15s;
position: relative;
overflow: hidden;
}
.product-card:hover { border-color: var(â€“accent); transform: translateY(-2px); box-shadow: 0 8px 24px rgba(245,200,66,0.1); }
.product-card:active { transform: translateY(0); }
.product-card.out-of-stock { opacity: 0.4; cursor: not-allowed; }
.product-emoji { font-size: 32px; margin-bottom: 8px; display: block; }
.product-name {
font-size: 13px;
font-weight: 600;
color: var(â€“text);
margin-bottom: 4px;
line-height: 1.3;
}
.product-price {
font-family: â€˜JetBrains Monoâ€™, monospace;
font-size: 13px;
font-weight: 700;
}
.price-mmk { color: var(â€“mmk); }
.price-thb { color: var(â€“thb); }
.stock-badge {
position: absolute;
top: 8px;
right: 8px;
font-size: 10px;
padding: 2px 6px;
border-radius: 4px;
background: var(â€“surface2);
color: var(â€“text2);
font-family: â€˜JetBrains Monoâ€™, monospace;
}
.stock-low { background: rgba(248,113,113,0.15); color: var(â€“red); }

/* RIGHT: CART */
.cart-panel {
display: flex;
flex-direction: column;
background: var(â€“surface);
overflow: hidden;
}
.cart-header {
padding: 16px 20px;
border-bottom: 1px solid var(â€“border);
display: flex;
justify-content: space-between;
align-items: center;
flex-shrink: 0;
}
.cart-title { font-weight: 700; font-size: 16px; letter-spacing: -0.3px; }
.cart-count {
background: var(â€“accent);
color: #000;
font-size: 12px;
font-weight: 700;
padding: 3px 9px;
border-radius: 12px;
font-family: â€˜JetBrains Monoâ€™, monospace;
}
.clear-btn {
font-size: 12px;
color: var(â€“text2);
background: none;
border: 1px solid var(â€“border);
padding: 4px 10px;
border-radius: 6px;
cursor: pointer;
transition: all 0.2s;
font-family: â€˜Space Groteskâ€™, sans-serif;
}
.clear-btn:hover { color: var(â€“red); border-color: var(â€“red); }

.cart-items {
flex: 1;
overflow-y: auto;
padding: 12px;
}
.cart-items::-webkit-scrollbar { width: 4px; }
.cart-items::-webkit-scrollbar-thumb { background: var(â€“border); border-radius: 2px; }

.cart-empty {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
height: 100%;
color: var(â€“text2);
gap: 10px;
}
.cart-empty-icon { font-size: 48px; opacity: 0.3; }
.cart-empty p { font-size: 14px; }

.cart-item {
display: flex;
align-items: center;
gap: 10px;
padding: 10px;
background: var(â€“surface2);
border-radius: var(â€“radius-sm);
margin-bottom: 8px;
border: 1px solid var(â€“border);
animation: slideIn 0.2s ease;
}
@keyframes slideIn { from { opacity: 0; transform: translateX(10px); } to { opacity: 1; transform: translateX(0); } }
.cart-item-emoji { font-size: 22px; flex-shrink: 0; }
.cart-item-info { flex: 1; min-width: 0; }
.cart-item-name { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.cart-item-price { font-size: 12px; color: var(â€“text2); font-family: â€˜JetBrains Monoâ€™, monospace; }
.qty-controls { display: flex; align-items: center; gap: 6px; flex-shrink: 0; }
.qty-btn {
width: 26px; height: 26px;
border-radius: 6px;
border: 1px solid var(â€“border);
background: var(â€“surface);
color: var(â€“text);
font-size: 16px;
cursor: pointer;
display: flex; align-items: center; justify-content: center;
transition: all 0.15s;
line-height: 1;
}
.qty-btn:hover { background: var(â€“accent); color: #000; border-color: var(â€“accent); }
.qty-num { font-family: â€˜JetBrains Monoâ€™, monospace; font-size: 14px; font-weight: 700; min-width: 20px; text-align: center; }
.item-total { font-family: â€˜JetBrains Monoâ€™, monospace; font-size: 13px; font-weight: 700; flex-shrink: 0; min-width: 70px; text-align: right; }

/* CART FOOTER */
.cart-footer {
border-top: 1px solid var(â€“border);
padding: 16px 20px;
flex-shrink: 0;
}
.discount-row {
display: flex;
gap: 8px;
margin-bottom: 12px;
}
.discount-row input {
flex: 1;
background: var(â€“surface2);
border: 1px solid var(â€“border);
border-radius: var(â€“radius-sm);
padding: 8px 12px;
color: var(â€“text);
font-size: 13px;
font-family: â€˜JetBrains Monoâ€™, monospace;
outline: none;
}
.discount-row input:focus { border-color: var(â€“accent2); }
.discount-row select {
background: var(â€“surface2);
border: 1px solid var(â€“border);
border-radius: var(â€“radius-sm);
padding: 8px 10px;
color: var(â€“text);
font-size: 13px;
outline: none;
cursor: pointer;
}
.totals { margin-bottom: 14px; }
.total-row {
display: flex;
justify-content: space-between;
align-items: center;
padding: 4px 0;
font-size: 13px;
color: var(â€“text2);
}
.total-row.grand {
font-size: 20px;
font-weight: 700;
color: var(â€“text);
padding: 10px 0;
border-top: 1px solid var(â€“border);
margin-top: 6px;
font-family: â€˜JetBrains Monoâ€™, monospace;
}
.total-row.grand .label { font-family: â€˜Space Groteskâ€™, sans-serif; font-size: 14px; }

.payment-section { margin-bottom: 12px; }
.payment-label { font-size: 12px; color: var(â€“text2); margin-bottom: 8px; }
.payment-methods { display: flex; gap: 6px; margin-bottom: 10px; }
.pay-method-btn {
flex: 1;
padding: 8px 6px;
border-radius: var(â€“radius-sm);
border: 1px solid var(â€“border);
background: var(â€“surface2);
color: var(â€“text2);
font-size: 12px;
cursor: pointer;
text-align: center;
transition: all 0.2s;
font-family: â€˜Space Groteskâ€™, sans-serif;
}
.pay-method-btn.active { border-color: var(â€“accent); color: var(â€“accent); background: rgba(245,200,66,0.08); }

.cash-input-row {
display: flex;
gap: 8px;
align-items: center;
margin-bottom: 8px;
}
.cash-input-row label { font-size: 12px; color: var(â€“text2); flex-shrink: 0; }
.cash-input-row input {
flex: 1;
background: var(â€“surface2);
border: 1px solid var(â€“border);
border-radius: var(â€“radius-sm);
padding: 8px 12px;
color: var(â€“text);
font-size: 14px;
font-family: â€˜JetBrains Monoâ€™, monospace;
font-weight: 700;
outline: none;
transition: border-color 0.2s;
}
.cash-input-row input:focus { border-color: var(â€“green); }
.change-display {
background: rgba(74,222,128,0.08);
border: 1px solid rgba(74,222,128,0.25);
border-radius: var(â€“radius-sm);
padding: 8px 12px;
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 12px;
font-family: â€˜JetBrains Monoâ€™, monospace;
}
.change-display .change-label { font-size: 12px; color: var(â€“text2); }
.change-display .change-amount { font-size: 16px; font-weight: 700; color: var(â€“green); }

.checkout-btn {
width: 100%;
padding: 14px;
background: var(â€“accent);
color: #000;
border: none;
border-radius: var(â€“radius);
font-size: 16px;
font-weight: 700;
cursor: pointer;
font-family: â€˜Space Groteskâ€™, sans-serif;
transition: all 0.2s;
letter-spacing: -0.3px;
}
.checkout-btn:hover { background: #ffd666; transform: translateY(-1px); box-shadow: 0 6px 20px rgba(245,200,66,0.25); }
.checkout-btn:disabled { opacity: 0.35; cursor: not-allowed; transform: none; box-shadow: none; }

/* RECEIPT MODAL */
.modal-overlay {
position: fixed; inset: 0;
background: rgba(0,0,0,0.85);
display: none;
align-items: center;
justify-content: center;
z-index: 100;
backdrop-filter: blur(6px);
}
.modal-overlay.open { display: flex; }
.receipt-modal {
background: #fff;
color: #111;
width: 320px;
border-radius: var(â€“radius);
overflow: hidden;
animation: popUp 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
box-shadow: 0 30px 60px rgba(0,0,0,0.4);
}
@keyframes popUp { from { opacity: 0; transform: scale(0.85); } to { opacity: 1; transform: scale(1); } }
.receipt-top {
background: #111;
color: #fff;
padding: 20px;
text-align: center;
}
.receipt-shop { font-size: 20px; font-weight: 700; letter-spacing: -0.5px; font-family: â€˜Space Groteskâ€™, sans-serif; }
.receipt-sub { font-size: 12px; color: #999; margin-top: 4px; font-family: â€˜JetBrains Monoâ€™, monospace; }
.receipt-body { padding: 20px; }
.receipt-line {
display: flex;
justify-content: space-between;
font-size: 13px;
padding: 4px 0;
font-family: â€˜JetBrains Monoâ€™, monospace;
}
.receipt-divider { border: none; border-top: 1px dashed #ddd; margin: 10px 0; }
.receipt-total {
display: flex;
justify-content: space-between;
font-size: 18px;
font-weight: 700;
padding: 8px 0;
font-family: â€˜JetBrains Monoâ€™, monospace;
}
.receipt-change { background: #f0fdf4; border-radius: 8px; padding: 10px; text-align: center; margin: 10px 0; }
.receipt-change .label { font-size: 11px; color: #666; }
.receipt-change .amount { font-size: 20px; font-weight: 700; color: #16a34a; font-family: â€˜JetBrains Monoâ€™, monospace; }
.receipt-thanks { text-align: center; font-size: 12px; color: #999; padding: 10px 0; }
.receipt-actions { display: flex; gap: 10px; padding: 0 20px 20px; }
.receipt-actions button {
flex: 1;
padding: 10px;
border-radius: 8px;
border: none;
cursor: pointer;
font-size: 14px;
font-weight: 600;
font-family: â€˜Space Groteskâ€™, sans-serif;
transition: opacity 0.2s;
}
.receipt-actions button:hover { opacity: 0.85; }
.btn-print { background: #111; color: #fff; }
.btn-close { background: #f3f4f6; color: #111; }

/* Toast */
.toast {
position: fixed;
bottom: 30px;
left: 50%;
transform: translateX(-50%) translateY(20px);
background: var(â€“surface);
border: 1px solid var(â€“border);
color: var(â€“text);
padding: 10px 20px;
border-radius: 30px;
font-size: 13px;
opacity: 0;
transition: all 0.3s;
z-index: 200;
pointer-events: none;
white-space: nowrap;
}
.toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

@media print {
body > *:not(.modal-overlay) { display: none; }
.modal-overlay { display: flex !important; background: white; }
.receipt-actions { display: none; }
}
</style>

</head>
<body>

<!-- TOP BAR -->

<div class="topbar">
  <div class="topbar-left">
    <div class="logo">POS<span> / Retail Shop</span></div>
    <div class="clock" id="clock">00:00:00</div>
  </div>
  <div class="currency-toggle">
    <button class="cur-btn active-mmk" id="btnMMK" onclick="setCurrency('MMK')">MMK ks</button>
    <button class="cur-btn" id="btnTHB" onclick="setCurrency('THB')">THB à¸¿</button>
  </div>
</div>

<!-- MAIN -->

<div class="main">

  <!-- PRODUCTS -->

  <div class="products-panel">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸ á€›á€¾á€¬á€™á€šá€º..." oninput="filterProducts()">
    </div>
    <div class="categories" id="categories"></div>
    <div class="product-grid" id="productGrid"></div>
  </div>

  <!-- CART -->

  <div class="cart-panel">
    <div class="cart-header">
      <span class="cart-title">ğŸ›’ á€„á€½á€±á€á€±á€¬á€„á€ºá€¸á€á€¶á€œá€½á€¾á€¬</span>
      <div style="display:flex;gap:8px;align-items:center;">
        <span class="cart-count" id="cartCount">0</span>
        <button class="clear-btn" onclick="clearCart()">á€–á€»á€€á€ºá€™á€Šá€º</button>
      </div>
    </div>

```
<div class="cart-items" id="cartItems">
  <div class="cart-empty">
    <div class="cart-empty-icon">ğŸ›ï¸</div>
    <p>á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸ á€™á€›á€½á€±á€¸á€›á€á€±á€¸á€•á€«</p>
  </div>
</div>

<div class="cart-footer">
  <!-- Discount -->
  <div class="discount-row">
    <input type="number" id="discountVal" placeholder="á€œá€»á€¾á€±á€¬á€·á€ˆá€±á€¸" min="0" oninput="updateTotals()">
    <select id="discountType" onchange="updateTotals()">
      <option value="flat">á€€á€»á€•á€º / à¸¿</option>
      <option value="percent">%</option>
    </select>
  </div>

  <!-- Totals -->
  <div class="totals">
    <div class="total-row"><span>á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸</span><span id="subtotalDisplay">0</span></div>
    <div class="total-row"><span>á€œá€»á€¾á€±á€¬á€·á€ˆá€±á€¸</span><span id="discountDisplay" style="color:var(--accent2)">-0</span></div>
    <div class="total-row grand">
      <span class="label">á€•á€±á€¸á€›á€™á€Šá€·á€ºá€„á€½á€±</span>
      <span id="grandDisplay">0</span>
    </div>
  </div>

  <!-- Payment -->
  <div class="payment-section">
    <div class="payment-label">á€„á€½á€±á€•á€±á€¸á€á€»á€±á€”á€Šá€ºá€¸</div>
    <div class="payment-methods">
      <button class="pay-method-btn active" id="pm-cash" onclick="setPayMethod('cash')">ğŸ’µ Cash</button>
      <button class="pay-method-btn" id="pm-transfer" onclick="setPayMethod('transfer')">ğŸ“± Transfer</button>
      <button class="pay-method-btn" id="pm-card" onclick="setPayMethod('card')">ğŸ’³ Card</button>
    </div>
    <div id="cashSection">
      <div class="cash-input-row">
        <label>á€œá€€á€ºá€á€¶á€„á€½á€±</label>
        <input type="number" id="cashReceived" placeholder="0" min="0" oninput="updateChange()">
      </div>
      <div class="change-display">
        <span class="change-label">á€¡á€™á€ºá€¸á€„á€½á€±</span>
        <span class="change-amount" id="changeDisplay">0</span>
      </div>
    </div>
  </div>

  <button class="checkout-btn" id="checkoutBtn" onclick="checkout()" disabled>
    á€„á€½á€±á€›á€¾á€„á€ºá€¸á€™á€Šá€º âœ“
  </button>
</div>
```

  </div>
</div>

<!-- RECEIPT MODAL -->

<div class="modal-overlay" id="receiptModal">
  <div class="receipt-modal">
    <div class="receipt-top">
      <div class="receipt-shop">ğŸª Retail Shop</div>
      <div class="receipt-sub" id="receiptDate"></div>
    </div>
    <div class="receipt-body">
      <div id="receiptItems"></div>
      <hr class="receipt-divider">
      <div class="receipt-line"><span>á€œá€»á€¾á€±á€¬á€·á€ˆá€±á€¸</span><span id="receiptDiscount">-0</span></div>
      <div class="receipt-total"><span>á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸</span><span id="receiptTotal"></span></div>
      <div id="receiptChangeSect" class="receipt-change">
        <div class="label">á€¡á€™á€ºá€¸á€„á€½á€±</div>
        <div class="amount" id="receiptChange">0</div>
      </div>
      <div class="receipt-thanks">á€™á€Šá€ºá€€á€»á€±á€¸á€‡á€°á€¸á€á€„á€ºá€•á€«á€á€Šá€º â™¡</div>
    </div>
    <div class="receipt-actions">
      <button class="btn-print" onclick="window.print()">ğŸ–¨ï¸ Print</button>
      <button class="btn-close" onclick="closeReceipt()">á€•á€­á€á€ºá€™á€Šá€º</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// ===== DATA =====
const EXCHANGE = { MMK_PER_THB: 85 }; // 1 THB â‰ˆ 85 MMK (update as needed)

const products = [
  // Food & Drinks
  { id:1, name:'á€›á€±á€á€”á€·á€º',     emoji:'ğŸ¶', cat:'ğŸ¹ á€¡á€á€»á€­á€¯á€›á€Šá€º', priceMmk:500,    stock:50 },
  { id:2, name:'á€€á€±á€¬á€ºá€–á€®',     emoji:'â˜•', cat:'ğŸ¹ á€¡á€á€»á€­á€¯á€›á€Šá€º', priceMmk:1500,   stock:30 },
  { id:3, name:'á€†á€­á€¯á€’á€«',      emoji:'ğŸ¥¤', cat:'ğŸ¹ á€¡á€á€»á€­á€¯á€›á€Šá€º', priceMmk:800,    stock:24 },
  { id:4, name:'á€œá€€á€ºá€–á€€á€ºá€›á€Šá€º', emoji:'ğŸµ', cat:'ğŸ¹ á€¡á€á€»á€­á€¯á€›á€Šá€º', priceMmk:1000,   stock:20 },
  { id:5, name:'á€™á€¯á€”á€·á€º',       emoji:'ğŸ', cat:'ğŸª á€™á€¯á€”á€·á€º',    priceMmk:2000,   stock:15 },
  { id:6, name:'á€€á€»á€±á€¬á€€á€ºá€™á€á€º', emoji:'ğŸ©', cat:'ğŸª á€™á€¯á€”á€·á€º',    priceMmk:1200,   stock:8  },
  { id:7, name:'á€†á€­á€•á€ºá€€á€•á€º',    emoji:'ğŸ«', cat:'ğŸª á€™á€¯á€”á€·á€º',    priceMmk:3500,   stock:3  },
  // Household
  { id:8,  name:'á€†á€•á€ºá€•á€¼á€¬',    emoji:'ğŸ§¼', cat:'ğŸ§´ á€¡á€­á€™á€ºá€á€¯á€¶á€¸', priceMmk:1500,   stock:40 },
  { id:9,  name:'á€á€™á€„á€º',       emoji:'ğŸª¥', cat:'ğŸ§´ á€¡á€­á€™á€ºá€á€¯á€¶á€¸', priceMmk:1000,   stock:25 },
  { id:10, name:'á€›á€±á€á€»á€­á€¯á€¸',    emoji:'ğŸ§´', cat:'ğŸ§´ á€¡á€­á€™á€ºá€á€¯á€¶á€¸', priceMmk:5000,   stock:18 },
  { id:11, name:'á€–á€á€ºá€›á€Šá€º',    emoji:'ğŸ«§',  cat:'ğŸ§´ á€¡á€­á€™á€ºá€á€¯á€¶á€¸', priceMmk:3000,   stock:0  },
  // Snacks
  { id:12, name:'á€¡á€¬á€œá€°á€¸á€€á€¼á€±á€¬á€º',emoji:'ğŸ¥”', cat:'ğŸ¿ á€™á€¯á€”á€·á€ºá€•á€±á€«á€º', priceMmk:2500,  stock:35 },
  { id:13, name:'á€•á€¼á€±á€¬á€„á€ºá€¸á€–á€°á€¸', emoji:'ğŸ¿', cat:'ğŸ¿ á€™á€¯á€”á€·á€ºá€•á€±á€«á€º', priceMmk:2000,  stock:22 },
  { id:14, name:'á€‚á€»á€•á€”á€ºá€€á€¼á€±á€¬á€º', emoji:'ğŸ˜', cat:'ğŸ¿ á€™á€¯á€”á€·á€ºá€•á€±á€«á€º', priceMmk:3000,  stock:12 },
  // Stationery
  { id:15, name:'á€˜á€±á€¬á€•á€„á€º',    emoji:'ğŸ–Šï¸', cat:'ğŸ“ á€›á€¯á€¶á€¸á€á€¯á€¶á€¸', priceMmk:500,    stock:100 },
  { id:16, name:'á€™á€¾á€á€ºá€…á€¯á€…á€¬',  emoji:'ğŸ““', cat:'ğŸ“ á€›á€¯á€¶á€¸á€á€¯á€¶á€¸', priceMmk:2000,   stock:45 },
  { id:17, name:'á€á€±á€á€¹á€á€¬',    emoji:'ğŸ“¦', cat:'ğŸ“ á€›á€¯á€¶á€¸á€á€¯á€¶á€¸', priceMmk:1500,   stock:60 },
];

// ===== STATE =====
let currency = 'MMK';
let cart = [];
let payMethod = 'cash';
let currentCategory = 'All';

// ===== CURRENCY =====
function setCurrency(cur) {
  currency = cur;
  document.getElementById('btnMMK').className = 'cur-btn' + (cur === 'MMK' ? ' active-mmk' : '');
  document.getElementById('btnTHB').className = 'cur-btn' + (cur === 'THB' ? ' active-thb' : '');
  renderProducts();
  updateTotals();
}

function toDisplay(mmkAmount) {
  if (currency === 'THB') {
    return 'à¸¿' + (mmkAmount / EXCHANGE.MMK_PER_THB).toFixed(0);
  }
  return (mmkAmount).toLocaleString() + ' ks';
}

function toMMK(displayAmt) {
  if (currency === 'THB') return displayAmt * EXCHANGE.MMK_PER_THB;
  return displayAmt;
}

// ===== CATEGORIES =====
function renderCategories() {
  const cats = ['All', ...new Set(products.map(p => p.cat))];
  const el = document.getElementById('categories');
  el.innerHTML = cats.map(c =>
    `<button class="cat-btn ${c === currentCategory ? 'active' : ''}" onclick="setCategory('${c}')">${c}</button>`
  ).join('');
}

function setCategory(cat) {
  currentCategory = cat;
  renderCategories();
  renderProducts();
}

// ===== PRODUCTS =====
function filterProducts() { renderProducts(); }

function renderProducts() {
  const search = document.getElementById('searchInput').value.toLowerCase();
  const filtered = products.filter(p => {
    const matchCat = currentCategory === 'All' || p.cat === currentCategory;
    const matchSearch = p.name.toLowerCase().includes(search);
    return matchCat && matchSearch;
  });

  const grid = document.getElementById('productGrid');
  if (filtered.length === 0) {
    grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:var(--text2);padding:40px;font-size:14px;">á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸ á€™á€á€½á€±á€·á€•á€«</div>`;
    return;
  }

  grid.innerHTML = filtered.map(p => {
    const priceLabel = currency === 'THB'
      ? `<span class="price-thb">à¸¿${(p.priceMmk / EXCHANGE.MMK_PER_THB).toFixed(0)}</span>`
      : `<span class="price-mmk">${p.priceMmk.toLocaleString()} ks</span>`;
    const stockClass = p.stock === 0 ? 'out-of-stock' : '';
    const stockBadge = p.stock <= 5 && p.stock > 0
      ? `<span class="stock-badge stock-low">âš ï¸ ${p.stock}</span>`
      : p.stock === 0 ? `<span class="stock-badge stock-low">á€€á€¯á€”á€º</span>` : `<span class="stock-badge">${p.stock}</span>`;
    return `
      <div class="product-card ${stockClass}" onclick="${p.stock > 0 ? `addToCart(${p.id})` : ''}">
        ${stockBadge}
        <span class="product-emoji">${p.emoji}</span>
        <div class="product-name">${p.name}</div>
        ${priceLabel}
      </div>`;
  }).join('');
}

// ===== CART =====
function addToCart(id) {
  const product = products.find(p => p.id === id);
  if (!product || product.stock === 0) return;
  const existing = cart.find(c => c.id === id);
  if (existing) {
    if (existing.qty >= product.stock) { showToast('âš ï¸ Stock á€™á€œá€¯á€¶á€œá€±á€¬á€€á€ºá€•á€«'); return; }
    existing.qty++;
  } else {
    cart.push({ ...product, qty: 1 });
  }
  renderCart();
  updateTotals();
  showToast(`âœ“ ${product.name} á€‘á€Šá€·á€ºá€œá€­á€¯á€€á€ºá€á€Šá€º`);
}

function removeFromCart(id) {
  const idx = cart.findIndex(c => c.id === id);
  if (idx === -1) return;
  if (cart[idx].qty > 1) cart[idx].qty--;
  else cart.splice(idx, 1);
  renderCart();
  updateTotals();
}

function clearCart() {
  cart = [];
  document.getElementById('discountVal').value = '';
  document.getElementById('cashReceived').value = '';
  renderCart();
  updateTotals();
}

function renderCart() {
  const el = document.getElementById('cartItems');
  document.getElementById('cartCount').textContent = cart.reduce((s, c) => s + c.qty, 0);
  if (cart.length === 0) {
    el.innerHTML = `<div class="cart-empty"><div class="cart-empty-icon">ğŸ›ï¸</div><p>á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸ á€™á€›á€½á€±á€¸á€›á€á€±á€¸á€•á€«</p></div>`;
    return;
  }
  el.innerHTML = cart.map(item => `
    <div class="cart-item">
      <span class="cart-item-emoji">${item.emoji}</span>
      <div class="cart-item-info">
        <div class="cart-item-name">${item.name}</div>
        <div class="cart-item-price">${toDisplay(item.priceMmk)} Ã— ${item.qty}</div>
      </div>
      <div class="qty-controls">
        <button class="qty-btn" onclick="removeFromCart(${item.id})">âˆ’</button>
        <span class="qty-num">${item.qty}</span>
        <button class="qty-btn" onclick="addToCart(${item.id})">+</button>
      </div>
      <span class="item-total" style="color:${currency==='THB'?'var(--thb)':'var(--mmk)'}">${toDisplay(item.priceMmk * item.qty)}</span>
    </div>
  `).join('');
}

// ===== TOTALS =====
function getSubtotal() { return cart.reduce((s, c) => s + c.priceMmk * c.qty, 0); }

function getDiscount(subtotal) {
  const val = parseFloat(document.getElementById('discountVal').value) || 0;
  const type = document.getElementById('discountType').value;
  if (type === 'percent') return Math.min(subtotal, subtotal * val / 100);
  return currency === 'THB' ? Math.min(subtotal, toMMK(val)) : Math.min(subtotal, val);
}

function updateTotals() {
  const subtotal = getSubtotal();
  const discount = getDiscount(subtotal);
  const grand = subtotal - discount;
  document.getElementById('subtotalDisplay').textContent = toDisplay(subtotal);
  document.getElementById('discountDisplay').textContent = '-' + toDisplay(discount);
  document.getElementById('grandDisplay').textContent = toDisplay(grand);
  document.getElementById('grandDisplay').style.color = currency === 'THB' ? 'var(--thb)' : 'var(--mmk)';
  updateChange();
  document.getElementById('checkoutBtn').disabled = cart.length === 0;
}

function updateChange() {
  const subtotal = getSubtotal();
  const discount = getDiscount(subtotal);
  const grand = subtotal - discount;
  const cashRaw = parseFloat(document.getElementById('cashReceived').value) || 0;
  const cashMmk = currency === 'THB' ? cashRaw * EXCHANGE.MMK_PER_THB : cashRaw;
  const change = Math.max(0, cashMmk - grand);
  document.getElementById('changeDisplay').textContent = toDisplay(change);
}

// ===== PAYMENT =====
function setPayMethod(method) {
  payMethod = method;
  ['cash','transfer','card'].forEach(m => {
    document.getElementById('pm-'+m).className = 'pay-method-btn' + (m === method ? ' active' : '');
  });
  document.getElementById('cashSection').style.display = method === 'cash' ? 'block' : 'none';
}

// ===== CHECKOUT =====
function checkout() {
  if (cart.length === 0) return;
  const subtotal = getSubtotal();
  const discount = getDiscount(subtotal);
  const grand = subtotal - discount;
  const cashRaw = parseFloat(document.getElementById('cashReceived').value) || 0;
  const cashMmk = currency === 'THB' ? cashRaw * EXCHANGE.MMK_PER_THB : cashRaw;

  if (payMethod === 'cash' && cashMmk < grand) {
    showToast('âš ï¸ á€„á€½á€±á€™á€œá€¯á€¶á€œá€±á€¬á€€á€ºá€•á€«'); return;
  }

  const change = Math.max(0, cashMmk - grand);
  const now = new Date();
  document.getElementById('receiptDate').textContent =
    now.toLocaleDateString('my-MM') + ' | ' + now.toLocaleTimeString('my-MM');

  document.getElementById('receiptItems').innerHTML = cart.map(item => `
    <div class="receipt-line">
      <span>${item.emoji} ${item.name} Ã—${item.qty}</span>
      <span>${toDisplay(item.priceMmk * item.qty)}</span>
    </div>
  `).join('');

  document.getElementById('receiptDiscount').textContent = '-' + toDisplay(discount);
  document.getElementById('receiptTotal').textContent = toDisplay(grand);

  const changeSect = document.getElementById('receiptChangeSect');
  if (payMethod === 'cash') {
    changeSect.style.display = 'block';
    document.getElementById('receiptChange').textContent = toDisplay(change);
  } else {
    changeSect.style.display = 'none';
  }

  document.getElementById('receiptModal').classList.add('open');

  // Reduce stock
  cart.forEach(item => {
    const p = products.find(p => p.id === item.id);
    if (p) p.stock -= item.qty;
  });
}

function closeReceipt() {
  document.getElementById('receiptModal').classList.remove('open');
  clearCart();
  renderProducts();
}

// ===== TOAST =====
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

// ===== CLOCK =====
function updateClock() {
  const now = new Date();
  document.getElementById('clock').textContent = now.toLocaleTimeString('my-MM');
}
setInterval(updateClock, 1000);
updateClock();

// ===== INIT =====
renderCategories();
renderProducts();
setPayMethod('cash');
updateTotals();
</script>

</body>
</html>