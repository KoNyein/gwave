{% extends 'shop/base.html' %}
{% block title %}Sale {{ sale.sale_number }} â€” POS{% endblock %}

{% block content %}
<div class="page">
  <div class="page-header">
    <div class="page-title">ğŸ§¾ Sale #{{ sale.sale_number }}</div>
    <a href="{% url 'sales_history' %}" class="btn btn-ghost">â† á€•á€¼á€”á€ºá€á€½á€¬á€¸á€™á€Šá€º</a>
  </div>

  <div style="display:grid;grid-template-columns:1fr 320px;gap:16px;max-width:900px">
    <div class="card">
      <div style="font-size:14px;font-weight:700;margin-bottom:14px;color:var(--text2)">á€á€šá€ºá€šá€°á€á€±á€¬á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸á€™á€»á€¬á€¸</div>
      <table>
        <thead><tr><th>á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸</th><th>á€ˆá€±á€¸á€”á€¾á€¯á€”á€ºá€¸</th><th>á€¡á€›á€±á€¡á€á€½á€€á€º</th><th>á€•á€±á€¸á€„á€½á€±</th></tr></thead>
        <tbody>
          {% for item in sale.items.all %}
          <tr>
            <td>{{ item.product_emoji }} {{ item.product_name }}</td>
            <td style="font-family:'JetBrains Mono',monospace">{{ item.price_mmk|floatformat:0 }} ks</td>
            <td style="font-family:'JetBrains Mono',monospace">Ã—{{ item.quantity }}</td>
            <td style="font-family:'JetBrains Mono',monospace;font-weight:700;color:var(--accent)">{{ item.subtotal|floatformat:0 }} ks</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="card">
      <div style="font-size:14px;font-weight:700;margin-bottom:14px;color:var(--text2)">á€„á€½á€±á€á€»á€±á€™á€¾á€¯á€¡á€á€±á€¸á€…á€­á€á€º</div>
      <div style="display:flex;flex-direction:column;gap:10px;font-size:14px">
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">Sale #</span><span style="font-family:'JetBrains Mono',monospace;font-weight:700;color:var(--accent)">{{ sale.sale_number }}</span></div>
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">á€›á€€á€ºá€…á€½á€²</span><span style="font-size:12px">{{ sale.created_at|date:"d/m/Y H:i" }}</span></div>
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">Cashier</span><span>{{ sale.cashier|default:"â€”" }}</span></div>
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">á€„á€½á€±á€•á€±á€¸á€á€»á€±á€”á€Šá€ºá€¸</span><span class="badge {% if sale.payment_method == 'cash' %}badge-green{% elif sale.payment_method == 'transfer' %}badge-blue{% else %}badge-yellow{% endif %}">{{ sale.get_payment_method_display }}</span></div>
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">Currency</span><span class="badge {% if sale.currency == 'MMK' %}badge-yellow{% else %}badge-blue{% endif %}">{{ sale.currency }}</span></div>
        <hr style="border-color:var(--border)">
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸</span><span style="font-family:'JetBrains Mono',monospace">{{ sale.subtotal|floatformat:0 }}</span></div>
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">á€œá€»á€¾á€±á€¬á€·á€ˆá€±á€¸</span><span style="font-family:'JetBrains Mono',monospace;color:var(--accent2)">-{{ sale.discount|floatformat:0 }}</span></div>
        <div style="display:flex;justify-content:space-between;font-weight:700;font-size:16px"><span>á€•á€±á€¸á€›á€™á€Šá€·á€ºá€„á€½á€±</span><span style="font-family:'JetBrains Mono',monospace;color:var(--accent)">{{ sale.total|floatformat:0 }} {{ sale.currency }}</span></div>
        {% if sale.payment_method == 'cash' %}
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">á€œá€€á€ºá€á€¶á€„á€½á€±</span><span style="font-family:'JetBrains Mono',monospace">{{ sale.cash_received|floatformat:0 }}</span></div>
        <div style="display:flex;justify-content:space-between"><span style="color:var(--text2)">á€¡á€™á€ºá€¸á€„á€½á€±</span><span style="font-family:'JetBrains Mono',monospace;color:var(--green)">{{ sale.change_amount|floatformat:0 }}</span></div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
